<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì</title>

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
    }

    .box {
      width: 100%;
      max-width: 500px;
      background: rgba(0,0,0,0.75);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 20px 40px rgba(0,0,0,.4);
      animation: pop 0.4s ease;
    }

    @keyframes pop {
      from { transform: scale(.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .choice label {
      display: block;
      padding: 12px;
      margin: 10px 0;
      border-radius: 12px;
      background: rgba(255,255,255,0.08);
      cursor: pointer;
      transition: all .2s ease;
    }

    .choice label:hover {
      background: rgba(255,255,255,0.18);
      transform: translateX(5px);
    }

    input[type="radio"] {
      display: none;
    }

    input[type="radio"]:checked + span {
      background: #ffcc00;
      color: #000;
      padding: 12px;
      border-radius: 12px;
      display: block;
      font-weight: bold;
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 12px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      background: linear-gradient(135deg, #ff512f, #f09819);
      color: #000;
    }

    .secondary {
      background: linear-gradient(135deg, #36d1dc, #5b86e5);
    }

    .result {
      text-align: center;
    }

    .hint {
      font-size: 13px;
      opacity: .7;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div class="box" id="box">
  <h1 id="title"></h1>
  <h2 id="question"></h2>
  <div id="choices"></div>
  <button onclick="nextQuestion()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const friendName = params.get("name") || "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì";

  document.getElementById("title").innerText =
    "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á " + friendName;

  const quiz = [
    {
      q: "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á?",
      c: [
        { text: "a. ‡∏Ñ‡∏ô‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°", type: "serious" },
        { text: "b. ‡∏Ç‡∏µ‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢", type: "social" },
        { text: "c. ‡πÇ‡∏Ñ‡∏£‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏≠‡∏á", type: "toxic" },
        { text: "d. ‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô", type: "lazy" }
      ]
    },
    {
      q: "‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô 100 ‡πÄ‡∏Ç‡∏≤‡∏à‡∏∞?",
      c: [
        { text: "a. ‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≠‡∏°", type: "serious" },
        { text: "b. ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", type: "social" },
        { text: "c. ‡πÉ‡∏ä‡πâ‡∏´‡∏°‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ", type: "lazy" },
        { text: "d. ‡∏≠‡∏ß‡∏î‡∏Å‡πà‡∏≠‡∏ô", type: "toxic" }
      ]
    }
  ];

  let index = 0;
  const score = { lazy: 0, social: 0, serious: 0, toxic: 0 };

  function showQuestion() {
    document.getElementById("question").innerText = quiz[index].q;
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";

    quiz[index].c.forEach(choice => {
      const div = document.createElement("div");
      div.className = "choice";
      div.innerHTML = `
        <label>
          <input type="radio" name="choice" value="${choice.type}">
          <span>${choice.text}</span>
        </label>
      `;
      choicesDiv.appendChild(div);
    });
  }

  function nextQuestion() {
    const selected = document.querySelector('input[name="choice"]:checked');
    if (!selected) {
      alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏á‡∏≠‡∏ô üòè");
      return;
    }

    score[selected.value]++;
    index++;

    if (index < quiz.length) {
      showQuestion();
    } else {
      showResult();
    }
  }

  function showResult() {
    const resultType = Object.keys(score).reduce((a, b) =>
      score[a] > score[b] ? a : b
    );

    const results = {
      lazy: "‡∏™‡∏≤‡∏¢‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô üò¥",
      social: "‡∏™‡∏≤‡∏¢‡πÄ‡∏Æ‡∏Æ‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏Å ü•≥",
      serious: "‡∏™‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÑ‡∏Å‡∏• üìà",
      toxic: "‡πÇ‡∏Ñ‡∏£‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏≠‡∏á üòàüî•"
    };

    const shareText =
      `‡∏ú‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡∏Ç‡∏≠‡∏á ${friendName} ‡∏Ñ‡∏∑‡∏≠ "${results[resultType]}" üòÇ\n‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡∏î‡∏π üëâ ${location.origin + location.pathname}?name=${encodeURIComponent(friendName)}`;

    document.getElementById("box").innerHTML = `
      <div class="result">
        <h1>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h1>
        <h2>${friendName}</h2>
        <h2>${results[resultType]}</h2>

        <button onclick="shareResult()">‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
        <button class="secondary" onclick="location.href='index.html'">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà</button>

        <div class="hint">
          * ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏ï‡∏ö‡∏Å‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á *
        </div>
      </div>
    `;

    window._shareText = shareText;
  }

  function shareResult() {
    if (navigator.share) {
      navigator.share({
        title: "‡∏ú‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
        text: window._shareText
      });
    } else {
      navigator.clipboard.writeText(window._shareText);
      alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß üìã ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏™‡πà‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢");
    }
  }

  showQuestion();
</script>

</body>
</html>
